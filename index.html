<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Extremely Simple IP Address Monitor</title>
  <!-- Tailwind CSS 2.2.19 -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <!-- Font Awesome 6.5.2 for Icons -->
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts: Roboto -->
  <link href="https://cdn.jsdelivr.net/npm/@fontsource/roboto@3.3.1/index.css" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', sans-serif; }
  </style>
</head>
<body class="bg-gradient-to-tr from-blue-50 to-purple-100 min-h-screen flex items-center justify-center">
  <div class="bg-white shadow-xl rounded-xl p-8 max-w-sm w-full space-y-6">
    <header class="flex items-center justify-between mb-3">
      <div class="flex items-center space-x-2">
        <i class="fas fa-network-wired text-blue-500 text-xl"></i>
        <span class="font-bold text-xl text-gray-800">Simple IP Monitor</span>
      </div>
      <button onclick="refreshNetworkInfo()" class="text-blue-400 hover:text-blue-700" title="Refresh">
        <i class="fas fa-sync-alt"></i>
      </button>
    </header>
    <div class="text-center">
      <div class="text-sm text-gray-500 mb-1">Your Local Device Info</div>
      <div class="text-3xl font-mono font-semibold text-blue-600 mb-2" id="ipAddr">Unavailable</div>
    </div>
    <div class="flex flex-col items-center justify-center space-y-2">
      <div>
        <span class="text-gray-600 mr-2"><i class="fas fa-wifi"></i> Network Type:</span>
        <span id="networkType" class="font-semibold text-gray-800">Detecting...</span>
      </div>
      <div>
        <span class="text-gray-600 mr-2"><i class="fas fa-globe"></i> Protocol:</span>
        <span id="protocol" class="font-semibold text-gray-800">Detecting...</span>
      </div>
      <div>
        <span class="text-gray-600 mr-2"><i class="fas fa-clock"></i> Last Updated:</span>
        <span id="updatedTime" class="font-semibold text-gray-800">--:--:--</span>
      </div>
    </div>
    <div class="pt-4 text-xs text-gray-400 text-center">
      <span><i class="fas fa-info-circle"></i> Only local information can be shown without external APIs.</span>
    </div>
  </div>
<script>
function updateClock() {
  const now = new Date();
  document.getElementById('updatedTime').textContent = now.toLocaleTimeString();
}
// Only local detection: Protocol & limited network info
function showProtocol() {
  let protocol = location.protocol.replace(':', '').toUpperCase();
  document.getElementById('protocol').textContent = protocol || 'Unknown';
}
// Try to detect network type using Network Information API (only in some browsers)
function showNetworkType() {
  let networkType = 'Unavailable';
  if (navigator.connection && navigator.connection.effectiveType) {
    const nt = navigator.connection.effectiveType;
    switch (nt) {
      case 'wifi':
        networkType = 'WiFi';
        break;
      case 'cellular':
        networkType = 'Cellular';
        break;
      case 'ethernet':
        networkType = 'Ethernet';
        break;
      case 'bluetooth':
        networkType = 'Bluetooth';
        break;
      default:
        networkType = nt.charAt(0).toUpperCase() + nt.slice(1);
    }
  } else {
    networkType = 'Unknown';
  }
  document.getElementById('networkType').textContent = networkType;
}
// Attempt to detect local IP using WebRTC - not guaranteed cross-browser, no external servers!
function getLocalIP(callback) {
  let ipFound = false;
  let RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
  if (RTCPeerConnection) {
    let rtc = new RTCPeerConnection({iceServers:[]});
    rtc.createDataChannel('');
    rtc.createOffer().then(offer => rtc.setLocalDescription(offer));
    rtc.onicecandidate = event => {
      if (event && event.candidate && event.candidate.candidate) {
        let res = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(event.candidate.candidate);
        if (res) {
          ipFound = true;
          callback(res[1]);
          rtc.close();
        }
      } else if (!ipFound) {
        callback('Unavailable');
        rtc.close();
      }
    };
    setTimeout(()=>{ if (!ipFound){ callback('Unavailable'); rtc.close(); } }, 2500);
  } else {
    callback('Unavailable');
  }
}
function refreshNetworkInfo() {
  updateClock();
  showProtocol();
  showNetworkType();
  // Show local IP if possible
  getLocalIP(ip => {
    document.getElementById('ipAddr').textContent = ip;
  });
}
window.onload = () => {
  refreshNetworkInfo();
  setInterval(() => {
    updateClock();
  }, 1000);
};
</script>
</body>
</html>

